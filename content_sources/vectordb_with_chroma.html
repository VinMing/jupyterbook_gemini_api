

<!DOCTYPE html>


<html data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>ä½¿ç”¨ ChromaDB è®°å½•é—®ç­” &#8212; Gemini API Tutorial</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=5b4479735964841361fd" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=5b4479735964841361fd" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=5b4479735964841361fd" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd" />
  <script src="../_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=5b4479735964841361fd"></script>

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'content_sources/vectordb_with_chroma';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Workspace è®¿é—®Google AI Studio" href="workspace_auth_quickstart.html" />
    <link rel="prev" title="ä½¿ç”¨åµŒå…¥è®­ç»ƒæ–‡æœ¬åˆ†ç±»å™¨" href="train_text_classifier_embeddings.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="None"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/google_ai_developers_logo.jpg" class="logo__image only-light" alt="Gemini API Tutorial - Home"/>
    <script>document.write(`<img src="../_static/google_ai_developers_logo.jpg" class="logo__image only-dark" alt="Gemini API Tutorial - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    æ¬¢è¿æ¥åˆ° Gemini api æ•™ç¨‹æ–‡æ¡£
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">å¼€å§‹</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="welcome.html">Gemini API ä½¿ç”¨å…¥é—¨</a></li>
<li class="toctree-l1"><a class="reference internal" href="ai_studio_quickstart.html">Google AI Studio å¿«é€Ÿå…¥é—¨</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">å¿«é€Ÿå…¥é—¨</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Gemini API æ•™ç¨‹</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_quickstart.html">Gemini API: Python å¿«é€Ÿå…¥é—¨</a></li>
<li class="toctree-l1"><a class="reference internal" href="rest_quickstart.html">å¿«é€Ÿå…¥é—¨ï¼šä½¿ç”¨ REST API å¼€å§‹ä½¿ç”¨ Gemini</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Gemini API</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="gemini_api_overview.html">Gemini API æ¦‚è§ˆ</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials_setup.html">è·å– API å¯†é’¥</a></li>
<li class="toctree-l1"><a class="reference internal" href="api_versions.html">API ç‰ˆæœ¬è¯´æ˜</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="models/models_index.html">æ¨¡å‹</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="models/models.html">é€‚ç”¨äº Gemini API çš„ AI æ¨¡å‹</a></li>
<li class="toctree-l2"><a class="reference internal" href="models/gemini.html">Gemini æ¨¡å‹</a></li>
<li class="toctree-l2"><a class="reference internal" href="models/palm.html">PaLM 2 æ¨¡å‹(æ—§ç‰ˆ)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="safety_setting_gemini.html">å®‰å…¨è®¾ç½®</a></li>
<li class="toctree-l1"><a class="reference internal" href="safety_guidance.html">å®‰å…¨æŒ‡å¯¼</a></li>
<li class="toctree-l1"><a class="reference internal" href="downloads.html">ä¸‹è½½æˆ–å®‰è£…åº“ä»¥è®¿é—® Gemini</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">æŒ‡å—</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="concepts.html">LLM æ¦‚å¿µæŒ‡å—</a></li>
<li class="toctree-l1"><a class="reference internal" href="prompt_intro.html">æç¤ºè®¾è®¡ç®€ä»‹</a></li>
<li class="toctree-l1"><a class="reference internal" href="prompt_best_practices.html">æç¤ºè®¾è®¡ç­–ç•¥</a></li>
<li class="toctree-l1"><a class="reference internal" href="multimodal_concepts.html">å¤šæ¨¡æ€æ¦‚å¿µ</a></li>
<li class="toctree-l1"><a class="reference internal" href="semantic_retriever.html">è¯­ä¹‰æ£€ç´¢</a></li>
<li class="toctree-l1"><a class="reference internal" href="oauth_quickstart.html">OAuth èº«ä»½éªŒè¯</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">åµŒå…¥</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="embeddings_guide.html">åµŒå…¥æŒ‡å—</a></li>
<li class="toctree-l1"><a class="reference internal" href="anomaly_detection.html">ä½¿ç”¨åµŒå…¥è¿›è¡Œå¼‚å¸¸æ£€æµ‹</a></li>

<li class="toctree-l1"><a class="reference internal" href="clustering_with_embeddings.html">ä½¿ç”¨ t-SNE å¯è§†åŒ–åµŒå…¥</a></li>

<li class="toctree-l1"><a class="reference internal" href="doc_search_emb.html">ä½¿ç”¨åµŒå…¥è¿›è¡Œæ–‡æ¡£æœç´¢</a></li>
<li class="toctree-l1"><a class="reference internal" href="train_text_classifier_embeddings.html">ä½¿ç”¨åµŒå…¥è®­ç»ƒæ–‡æœ¬åˆ†ç±»å™¨</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">ä½¿ç”¨ ChromaDB è®°å½•é—®ç­”</a></li>

</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">è°ƒè¯•</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="workspace_auth_quickstart.html">Workspace è®¿é—®Google AI Studio</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">é—®é¢˜æ’æŸ¥æŒ‡å—</a></li>
<li class="toctree-l1"><a class="reference internal" href="ai_studio_faqs.html">Google AI Studio å¸¸è§é—®é¢˜è§£ç­”</a></li>
<li class="toctree-l1"><a class="reference internal" href="increase_quota.html">ç”³è¯·å¢åŠ é…é¢</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">ç¤¾åŒº</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="discord.html">Discord</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">å¾®è°ƒ</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="model_tuning_guidance.html">æ¨¡å‹å¾®è°ƒæŒ‡å—</a></li>
<li class="toctree-l1"><a class="reference internal" href="tuning_quickstart_python_palm.html">PaLM APIï¼šä½¿ç”¨ Python å¾®è°ƒå¿«é€Ÿå…¥é—¨</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">æ³•å¾‹æ³•è§„</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="available_regions.html">å¯ç”¨åœ°åŒº</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/VinMing/tutorial_gemini_api" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="æºç åº“"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/VinMing/tutorial_gemini_api/issues/new?title=Issue%20on%20page%20%2Fcontent_sources/vectordb_with_chroma.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="åˆ›å»ºè®®é¢˜"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="ä¸‹è½½æ­¤é¡µé¢">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/content_sources/vectordb_with_chroma.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="ä¸‹è½½æºæ–‡ä»¶"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="åˆ—å°æˆ PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="å…¨å±æ¨¡å¼"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>ä½¿ç”¨ ChromaDB è®°å½•é—®ç­”</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> ç›®å½• </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">ä½¿ç”¨ ChromaDB è®°å½•é—®ç­”</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">æ¦‚è¿°</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">å‰ææ¡ä»¶</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">å®‰è£…</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#api">è·å– API å¯†é’¥</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">æ•°æ®</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">ä½¿ç”¨ ChromaDB åˆ›å»ºåµŒå…¥æ•°æ®åº“</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#embedding-001-api">ä½¿ç”¨æ¨¡å‹ embedding-001 å¯¹åµŒå…¥è¿›è¡Œ API æ›´æ”¹</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">è·å–ç›¸å…³æ–‡ä»¶</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">ä¸‹ä¸€æ­¥</a></li>
</ul>
</li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="chromadb">
<h1>ä½¿ç”¨ ChromaDB è®°å½•é—®ç­”<a class="headerlink" href="#chromadb" title="Permalink to this headline">#</a></h1>
<section id="id1">
<h2>æ¦‚è¿°<a class="headerlink" href="#id1" title="Permalink to this headline">#</a></h2>
<p>æœ¬æ•™ç¨‹æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ Gemini API åˆ›å»ºçŸ¢é‡æ•°æ®åº“å¹¶ä»æ•°æ®åº“ä¸­æ£€ç´¢é—®é¢˜çš„ç­”æ¡ˆã€‚æ­¤å¤–ï¼Œæ‚¨å°†ä½¿ç”¨ ChromaDBï¼Œè¿™æ˜¯ä¸€ä¸ªç”¨äºåˆ›å»ºåµŒå…¥æ•°æ®åº“çš„å¼€æº Python å·¥å…·ã€‚ ChromaDB å…è®¸æ‚¨ï¼š</p>
<ul class="simple">
<li><p>å­˜å‚¨åµŒå…¥åŠå…¶å…ƒæ•°æ®</p></li>
<li><p>åµŒå…¥æ–‡æ¡£å’ŒæŸ¥è¯¢</p></li>
<li><p>æœç´¢åµŒå…¥æ•°æ®åº“</p></li>
</ul>
<p>åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæ‚¨å°†ä½¿ç”¨åµŒå…¥ä»ä½¿ç”¨ ChromaDB åˆ›å»ºçš„å‘é‡æ•°æ®åº“ä¸­æ£€ç´¢ç­”æ¡ˆã€‚</p>
</section>
<section id="id2">
<h2>å‰ææ¡ä»¶<a class="headerlink" href="#id2" title="Permalink to this headline">#</a></h2>
<p>æ‚¨å¯ä»¥åœ¨ Google Colab ä¸­è¿è¡Œæ­¤å¿«é€Ÿå…¥é—¨ã€‚</p>
<p>è¦åœ¨æ‚¨è‡ªå·±çš„å¼€å‘ç¯å¢ƒä¸­å®Œæˆæœ¬å¿«é€Ÿå…¥é—¨ï¼Œè¯·ç¡®ä¿æ‚¨çš„ç¯å¢ƒæ»¡è¶³ä»¥ä¸‹è¦æ±‚ï¼š</p>
<ul class="simple">
<li><p>Python 3.9+</p></li>
<li><p>å®‰è£… jupyter ä»¥è¿è¡Œç¬”è®°æœ¬</p></li>
</ul>
</section>
<section id="id3">
<h2>å®‰è£…<a class="headerlink" href="#id3" title="Permalink to this headline">#</a></h2>
<p>é¦–å…ˆï¼Œä¸‹è½½å¹¶å®‰è£… Gemini API Python åº“ã€‚</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="ch">#!pip install -q google.generativeai</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>E1220 16:11:32.073512301  374504 backup_poller.cc:127]                 Run client channel backup poller: UNKNOWN:pollset_work {created_time:&quot;2023-12-20T16:11:32.073469114+08:00&quot;, children:[UNKNOWN:Bad file descriptor {created_time:&quot;2023-12-20T16:11:32.073447673+08:00&quot;, errno:9, os_error:&quot;Bad file descriptor&quot;, syscall:&quot;epoll_wait&quot;}]}
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="ch">#!pip install -q chromadb</span>
</pre></div>
</div>
</div>
</div>
<p>ç„¶åå¯¼å…¥æ‚¨å°†åœ¨æœ¬æ•™ç¨‹ä¸­ä½¿ç”¨çš„æ¨¡å—ã€‚</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">textwrap</span>
<span class="kn">import</span> <span class="nn">chromadb</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="kn">import</span> <span class="nn">google.generativeai</span> <span class="k">as</span> <span class="nn">genai</span>
<span class="kn">import</span> <span class="nn">google.ai.generativelanguage</span> <span class="k">as</span> <span class="nn">glm</span>

<span class="c1"># Used to securely store your API key</span>
<span class="c1"># from google.colab import userdata</span>

<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">Markdown</span>
<span class="kn">from</span> <span class="nn">chromadb</span> <span class="kn">import</span> <span class="n">Documents</span><span class="p">,</span> <span class="n">EmbeddingFunction</span><span class="p">,</span> <span class="n">Embeddings</span>
</pre></div>
</div>
</div>
</div>
<section id="api">
<h3>è·å– API å¯†é’¥<a class="headerlink" href="#api" title="Permalink to this headline">#</a></h3>
<p>åœ¨ä½¿ç”¨ Gemini API ä¹‹å‰ï¼Œæ‚¨å¿…é¡»å…ˆè·å– API å¯†é’¥ã€‚å¦‚æœæ‚¨è¿˜æ²¡æœ‰å¯†é’¥ï¼Œè¯·åœ¨ Google AI Studio ä¸­ä¸€é”®åˆ›å»ºå¯†é’¥ã€‚</p>
<p>åœ¨ Colab ä¸­ï¼Œå°†å¯†é’¥æ·»åŠ åˆ°å·¦ä¾§é¢æ¿â€œğŸ”‘â€ä¸‹çš„ç§˜å¯†ç®¡ç†å™¨ä¸­ã€‚å°†å…¶å‘½åä¸º API_KEYã€‚ è·å¾— API å¯†é’¥åï¼Œå°†å…¶ä¼ é€’ç»™ SDKã€‚æ‚¨å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼æ‰§è¡Œæ­¤æ“ä½œï¼š</p>
<ul class="simple">
<li><p>å°†å¯†é’¥æ”¾å…¥ GOOGLE_API_KEY ç¯å¢ƒå˜é‡ä¸­ï¼ˆSDK å°†è‡ªåŠ¨ä»é‚£é‡Œè·å–å®ƒï¼‰ã€‚</p></li>
<li><p>å°†å¯†é’¥ä¼ é€’ç»™ genai.configure(api_key=â€¦)</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Or use `os.getenv(&#39;API_KEY&#39;)` to fetch an environment variable.</span>
<span class="c1"># API_KEY=userdata.get(&#39;API_KEY&#39;)</span>
<span class="n">GOOGLE_API_KEY</span> <span class="o">=</span> <span class="s2">&quot;AIzaSyBityeJag9WTYwuZ75VJvqn3I4kzRm1Omo&quot;</span>
<span class="n">genai</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="n">GOOGLE_API_KEY</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>è¦ç‚¹ï¼šæ¥ä¸‹æ¥ï¼Œæ‚¨å°†é€‰æ‹©ä¸€ä¸ªæ¨¡å‹ã€‚ä»»ä½•åµŒå…¥æ¨¡å‹éƒ½é€‚ç”¨äºæœ¬æ•™ç¨‹ï¼Œä½†å¯¹äºå®é™…åº”ç”¨ç¨‹åºï¼Œé€‰æ‹©ç‰¹å®šæ¨¡å‹å¹¶åšæŒä½¿ç”¨éå¸¸é‡è¦ã€‚ä¸åŒå‹å·çš„è¾“å‡ºäº’ä¸å…¼å®¹ã€‚</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>æ³¨æ„ï¼šç›®å‰ï¼ŒGemini API <a class="reference internal" href="available_regions.html"><span class="doc std std-doc">ä»…åœ¨æŸäº›åŒºåŸŸå¯ç”¨</span></a>ã€‚</p>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">genai</span><span class="o">.</span><span class="n">list_models</span><span class="p">():</span>
  <span class="k">if</span> <span class="s1">&#39;embedContent&#39;</span> <span class="ow">in</span> <span class="n">m</span><span class="o">.</span><span class="n">supported_generation_methods</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>models/embedding-001
</pre></div>
</div>
</div>
</div>
</section>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="id4">
<h1>æ•°æ®<a class="headerlink" href="#id4" title="Permalink to this headline">#</a></h1>
<p>ä»¥ä¸‹æ˜¯æ‚¨å°†ç”¨äºåˆ›å»ºåµŒå…¥æ•°æ®åº“çš„ä¸€å°éƒ¨åˆ†æ–‡æ¡£ï¼š</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">DOCUMENT1</span> <span class="o">=</span> <span class="s2">&quot;Operating the Climate Control System  Your Googlecar has a climate control system that allows you to adjust the temperature and airflow in the car. To operate the climate control system, use the buttons and knobs located on the center console.  Temperature: The temperature knob controls the temperature inside the car. Turn the knob clockwise to increase the temperature or counterclockwise to decrease the temperature. Airflow: The airflow knob controls the amount of airflow inside the car. Turn the knob clockwise to increase the airflow or counterclockwise to decrease the airflow. Fan speed: The fan speed knob controls the speed of the fan. Turn the knob clockwise to increase the fan speed or counterclockwise to decrease the fan speed. Mode: The mode button allows you to select the desired mode. The available modes are: Auto: The car will automatically adjust the temperature and airflow to maintain a comfortable level. Cool: The car will blow cool air into the car. Heat: The car will blow warm air into the car. Defrost: The car will blow warm air onto the windshield to defrost it.&quot;</span>
<span class="n">DOCUMENT2</span> <span class="o">=</span> <span class="s2">&quot;Your Googlecar has a large touchscreen display that provides access to a variety of features, including navigation, entertainment, and climate control. To use the touchscreen display, simply touch the desired icon.  For example, you can touch the </span><span class="se">\&quot;</span><span class="s2">Navigation</span><span class="se">\&quot;</span><span class="s2"> icon to get directions to your destination or touch the </span><span class="se">\&quot;</span><span class="s2">Music</span><span class="se">\&quot;</span><span class="s2"> icon to play your favorite songs.&quot;</span>
<span class="n">DOCUMENT3</span> <span class="o">=</span> <span class="s2">&quot;Shifting Gears Your Googlecar has an automatic transmission. To shift gears, simply move the shift lever to the desired position.  Park: This position is used when you are parked. The wheels are locked and the car cannot move. Reverse: This position is used to back up. Neutral: This position is used when you are stopped at a light or in traffic. The car is not in gear and will not move unless you press the gas pedal. Drive: This position is used to drive forward. Low: This position is used for driving in snow or other slippery conditions.&quot;</span>

<span class="n">documents</span> <span class="o">=</span> <span class="p">[</span><span class="n">DOCUMENT1</span><span class="p">,</span> <span class="n">DOCUMENT2</span><span class="p">,</span> <span class="n">DOCUMENT3</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<section id="id5">
<h2>ä½¿ç”¨ ChromaDB åˆ›å»ºåµŒå…¥æ•°æ®åº“<a class="headerlink" href="#id5" title="Permalink to this headline">#</a></h2>
<p>æ‚¨å°†åˆ›å»ºä¸€ä¸ª<a class="reference external" href="https://docs.trychroma.com/embeddings#custom-embedding-functions">è‡ªå®šä¹‰å‡½æ•°</a>æ¥ä½¿ç”¨ Gemini API æ‰§è¡ŒåµŒå…¥ã€‚é€šè¿‡å°†ä¸€ç»„æ–‡æ¡£è¾“å…¥åˆ°æ­¤è‡ªå®šä¹‰å‡½æ•°ä¸­ï¼Œæ‚¨å°†æ”¶åˆ°å‘é‡æˆ–æ–‡æ¡£çš„åµŒå…¥ã€‚</p>
<section id="embedding-001-api">
<h3>ä½¿ç”¨æ¨¡å‹ embedding-001 å¯¹åµŒå…¥è¿›è¡Œ API æ›´æ”¹<a class="headerlink" href="#embedding-001-api" title="Permalink to this headline">#</a></h3>
<p>å¯¹äºæ–°çš„åµŒå…¥æ¨¡å‹ embedding-001ï¼Œæœ‰ä¸€ä¸ªæ–°çš„ä»»åŠ¡ç±»å‹å‚æ•°å’Œå¯é€‰æ ‡é¢˜ï¼ˆä»…åœ¨ task_type=RETRIEVAL_DOCUMENT æ—¶æœ‰æ•ˆï¼‰ã€‚<br />
è¿™äº›æ–°å‚æ•°ä»…é€‚ç”¨äºæœ€æ–°çš„åµŒå…¥æ¨¡å‹ã€‚ä»»åŠ¡ç±»å‹ä¸ºï¼š</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>ä»»åŠ¡ç±»å‹</p></th>
<th class="head"><p>æè¿°</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>RETRIEVAL_QUERY</p></td>
<td><p>æŒ‡å®šç»™å®šæ–‡æœ¬æ˜¯æœç´¢/æ£€ç´¢è®¾ç½®ä¸­çš„æŸ¥è¯¢ã€‚</p></td>
</tr>
<tr class="row-odd"><td><p>RETRIEVAL_DOCUMENT</p></td>
<td><p>æŒ‡å®šç»™å®šæ–‡æœ¬æ˜¯æœç´¢/æ£€ç´¢è®¾ç½®ä¸­çš„æ–‡æ¡£ã€‚</p></td>
</tr>
<tr class="row-even"><td><p>SEMANTIC_SIMILARITY</p></td>
<td><p>æŒ‡å®šç»™å®šæ–‡æœ¬å°†ç”¨äºè¯­ä¹‰æ–‡æœ¬ç›¸ä¼¼æ€§ (STS)ã€‚</p></td>
</tr>
<tr class="row-odd"><td><p>CLASSIFICATION</p></td>
<td><p>æŒ‡å®šåµŒå…¥å°†ç”¨äºåˆ†ç±»ã€‚</p></td>
</tr>
<tr class="row-even"><td><p>CLUSTERING</p></td>
<td><p>æŒ‡å®šåµŒå…¥å°†ç”¨äºèšç±»ã€‚</p></td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>æ³¨æ„ï¼šä¸º<code class="docutils literal notranslate"><span class="pre">RETRIEVAL_DOCUMENT</span></code>æŒ‡å®šæ ‡é¢˜å¯ä»¥ä¸ºæ£€ç´¢æä¾›æ›´å¥½è´¨é‡çš„åµŒå…¥ï¼Œä½†æ­¤å¤„çœç•¥ï¼Œå› ä¸º ChromaDB çš„<code class="docutils literal notranslate"><span class="pre">EmbeddingFunction</span></code>ä»…æ”¯æŒå†…å®¹å­—ç¬¦ä¸²çš„è¾“å…¥ã€‚</p>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">GeminiEmbeddingFunction</span><span class="p">(</span><span class="n">EmbeddingFunction</span><span class="p">):</span>
  <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">input</span><span class="p">:</span> <span class="n">Documents</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Embeddings</span><span class="p">:</span>
    <span class="n">model</span> <span class="o">=</span> <span class="s1">&#39;models/embedding-001&#39;</span>
    <span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;Custom query&quot;</span>
    <span class="k">return</span> <span class="n">genai</span><span class="o">.</span><span class="n">embed_content</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="n">model</span><span class="p">,</span>
                                <span class="n">content</span><span class="o">=</span><span class="nb">input</span><span class="p">,</span>
                                <span class="n">task_type</span><span class="o">=</span><span class="s2">&quot;retrieval_document&quot;</span><span class="p">,</span>
                                <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">)[</span><span class="s2">&quot;embedding&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>ç°åœ¨æ‚¨å°†åˆ›å»ºçŸ¢é‡æ•°æ®åº“ã€‚åœ¨<code class="docutils literal notranslate"><span class="pre">create_chroma_db</span></code>å‡½æ•°ä¸­ï¼Œæ‚¨å°†å®ä¾‹åŒ–ä¸€ä¸ª<a class="reference external" href="https://docs.trychroma.com/getting-started">Chroma å®¢æˆ·ç«¯</a>ã€‚ä»é‚£é‡Œï¼Œæ‚¨å°†åˆ›å»ºä¸€ä¸ªé›†åˆï¼Œåœ¨å…¶ä¸­å­˜å‚¨åµŒå…¥ã€æ–‡æ¡£å’Œä»»ä½•å…ƒæ•°æ®ã€‚è¯·æ³¨æ„ï¼Œä¸Šé¢çš„åµŒå…¥å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™ create_collectionã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œä½¿ç”¨ add æ–¹æ³•å°†æ–‡æ¡£æ·»åŠ åˆ°é›†åˆä¸­ã€‚</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">create_chroma_db</span><span class="p">(</span><span class="n">documents</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
  <span class="n">chroma_client</span> <span class="o">=</span> <span class="n">chromadb</span><span class="o">.</span><span class="n">Client</span><span class="p">()</span>
  <span class="n">db</span> <span class="o">=</span> <span class="n">chroma_client</span><span class="o">.</span><span class="n">create_collection</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">embedding_function</span><span class="o">=</span><span class="n">GeminiEmbeddingFunction</span><span class="p">())</span>

  <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">d</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">documents</span><span class="p">):</span>
    <span class="n">db</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
      <span class="n">documents</span><span class="o">=</span><span class="p">[</span><span class="n">d</span><span class="p">],</span>
      <span class="n">ids</span><span class="o">=</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)]</span>
    <span class="p">)</span>
  <span class="k">return</span> <span class="n">db</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">### </span>
<span class="c1"># Set up the DB</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">create_chroma_db</span><span class="p">(</span><span class="n">documents</span><span class="p">,</span> <span class="s2">&quot;googlecarsdatabase&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>é€šè¿‡æŸ¥çœ‹æ•°æ®åº“ç¡®è®¤æ•°æ®å·²æ’å…¥ï¼š</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">peek</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ids</th>
      <th>embeddings</th>
      <th>metadatas</th>
      <th>documents</th>
      <th>uris</th>
      <th>data</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>[-0.020994942635297775, -0.03876612335443497, ...</td>
      <td>None</td>
      <td>Operating the Climate Control System  Your Goo...</td>
      <td>None</td>
      <td>None</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>[0.017410801723599434, -0.04757162556052208, -...</td>
      <td>None</td>
      <td>Your Googlecar has a large touchscreen display...</td>
      <td>None</td>
      <td>None</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>[-0.03194405511021614, -0.023281503468751907, ...</td>
      <td>None</td>
      <td>Shifting Gears Your Googlecar has an automatic...</td>
      <td>None</td>
      <td>None</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
</section>
<section id="id6">
<h2>è·å–ç›¸å…³æ–‡ä»¶<a class="headerlink" href="#id6" title="Permalink to this headline">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">db</span></code>æ˜¯ Chroma é›†åˆå¯¹è±¡ã€‚æ‚¨å¯ä»¥å¯¹å…¶è°ƒç”¨<code class="docutils literal notranslate"><span class="pre">query</span></code>æ¥æ‰§è¡Œæœ€è¿‘é‚»æœç´¢ä»¥æŸ¥æ‰¾ç›¸ä¼¼çš„åµŒå…¥æˆ–æ–‡æ¡£ã€‚</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_relevant_passage</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">db</span><span class="p">):</span>
  <span class="n">passage</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">query_texts</span><span class="o">=</span><span class="p">[</span><span class="n">query</span><span class="p">],</span> <span class="n">n_results</span><span class="o">=</span><span class="mi">1</span><span class="p">)[</span><span class="s1">&#39;documents&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
  <span class="k">return</span> <span class="n">passage</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Perform embedding search</span>
<span class="n">passage</span> <span class="o">=</span> <span class="n">get_relevant_passage</span><span class="p">(</span><span class="s2">&quot;touch screen features&quot;</span><span class="p">,</span> <span class="n">db</span><span class="p">)</span>
<span class="n">Markdown</span><span class="p">(</span><span class="n">passage</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<p>Your Googlecar has a large touchscreen display that provides access to a variety of features, including navigation, entertainment, and climate control. To use the touchscreen display, simply touch the desired icon.  For example, you can touch the â€œNavigationâ€ icon to get directions to your destination or touch the â€œMusicâ€ icon to play your favorite songs.</p>
</div>
</div>
<p>ç°åœ¨æ‚¨å·²ç»åœ¨æ–‡æ¡£é›†ä¸­æ‰¾åˆ°äº†ç›¸å…³æ®µè½ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å®ƒè¿›è¡Œæç¤ºä»¥ä¼ é€’åˆ° Gemini APIã€‚</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">make_prompt</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">relevant_passage</span><span class="p">):</span>
  <span class="n">escaped</span> <span class="o">=</span> <span class="n">relevant_passage</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span>
  <span class="n">prompt</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;&quot;&quot;You are a helpful and informative bot that answers questions using text from the reference passage included below. </span><span class="se">\</span>
<span class="s2">  Be sure to respond in a complete sentence, being comprehensive, including all relevant background information. </span><span class="se">\</span>
<span class="s2">  However, you are talking to a non-technical audience, so be sure to break down complicated concepts and </span><span class="se">\</span>
<span class="s2">  strike a friendly and converstional tone. </span><span class="se">\</span>
<span class="s2">  If the passage is irrelevant to the answer, you may ignore it.</span>
<span class="s2">  QUESTION: &#39;</span><span class="si">{query}</span><span class="s2">&#39;</span>
<span class="s2">  PASSAGE: &#39;</span><span class="si">{relevant_passage}</span><span class="s2">&#39;</span>

<span class="s2">    ANSWER:</span>
<span class="s2">  &quot;&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">query</span><span class="o">=</span><span class="n">query</span><span class="p">,</span> <span class="n">relevant_passage</span><span class="o">=</span><span class="n">escaped</span><span class="p">)</span>

  <span class="k">return</span> <span class="n">prompt</span>
</pre></div>
</div>
</div>
</div>
<p>å°†æŸ¥è¯¢ä¼ é€’ç»™æç¤ºï¼š</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">query</span> <span class="o">=</span> <span class="s2">&quot;How do you use the touchscreen in the Google car?&quot;</span>
<span class="n">prompt</span> <span class="o">=</span> <span class="n">make_prompt</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">passage</span><span class="p">)</span>
<span class="n">Markdown</span><span class="p">(</span><span class="n">prompt</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<p>You are a helpful and informative bot that answers questions using text from the reference passage included below.   Be sure to respond in a complete sentence, being comprehensive, including all relevant background information.   However, you are talking to a non-technical audience, so be sure to break down complicated concepts and   strike a friendly and converstional tone.   If the passage is irrelevant to the answer, you may ignore it.
QUESTION: â€˜How do you use the touchscreen in the Google car?â€™
PASSAGE: â€˜Your Googlecar has a large touchscreen display that provides access to a variety of features, including navigation, entertainment, and climate control. To use the touchscreen display, simply touch the desired icon.  For example, you can touch the Navigation icon to get directions to your destination or touch the Music icon to play your favorite songs.â€™</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ANSWER:
</pre></div>
</div>
</div>
</div>
<p>ç°åœ¨ä½¿ç”¨<code class="docutils literal notranslate"><span class="pre">generate_content</span></code>æ–¹æ³•ä»æ¨¡å‹ç”Ÿæˆå“åº”ã€‚</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model</span> <span class="o">=</span> <span class="n">genai</span><span class="o">.</span><span class="n">GenerativeModel</span><span class="p">(</span><span class="s1">&#39;gemini-pro&#39;</span><span class="p">)</span>
<span class="n">answer</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">generate_content</span><span class="p">(</span><span class="n">prompt</span><span class="p">)</span>
<span class="n">Markdown</span><span class="p">(</span><span class="n">answer</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<p>In your Google car, you can interact with the large touchscreen display by simply touching the desired icon. For instance, to navigate to a specific destination, tap the Navigation icon, or to listen to your favorite tunes, tap the Music icon.</p>
</div>
</div>
</section>
<section id="id7">
<h2>ä¸‹ä¸€æ­¥<a class="headerlink" href="#id7" title="Permalink to this headline">#</a></h2>
<p>è¦äº†è§£æœ‰å…³å¦‚ä½•ä½¿ç”¨åµŒå…¥çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹å¯ç”¨çš„<a class="reference external" href="https://ai.google.dev/examples?keywords=embed">ç¤ºä¾‹</a>ã€‚è¦äº†è§£å¦‚ä½•ä½¿ç”¨ Gemini API ä¸­çš„å…¶ä»–æœåŠ¡ï¼Œè¯·è®¿é—®<a class="reference internal" href="python_quickstart.html"><span class="doc std std-doc">Python å¿«é€Ÿå…¥é—¨</span></a>ã€‚</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "gemini"
        },
        kernelOptions: {
            name: "gemini",
            path: "./content_sources"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'gemini'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="train_text_classifier_embeddings.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">ä½¿ç”¨åµŒå…¥è®­ç»ƒæ–‡æœ¬åˆ†ç±»å™¨</p>
      </div>
    </a>
    <a class="right-next"
       href="workspace_auth_quickstart.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Workspace è®¿é—®Google AI Studio</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> ç›®å½•
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">ä½¿ç”¨ ChromaDB è®°å½•é—®ç­”</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">æ¦‚è¿°</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">å‰ææ¡ä»¶</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">å®‰è£…</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#api">è·å– API å¯†é’¥</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">æ•°æ®</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">ä½¿ç”¨ ChromaDB åˆ›å»ºåµŒå…¥æ•°æ®åº“</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#embedding-001-api">ä½¿ç”¨æ¨¡å‹ embedding-001 å¯¹åµŒå…¥è¿›è¡Œ API æ›´æ”¹</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">è·å–ç›¸å…³æ–‡ä»¶</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">ä¸‹ä¸€æ­¥</a></li>
</ul>
</li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
<div class="extra_footer">
  <p class="w3-card w3-pale-blue w3-padding">
  CopyrightÂ Â©Â 2023
  <a href="https://github.com/VinMing">Stephen</a>Â |Â 
  Powered byÂ <a href="https://github.com/executablebooks/jupyter-book">Jupyter Book</a>.
</p>

</div>
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=5b4479735964841361fd"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>